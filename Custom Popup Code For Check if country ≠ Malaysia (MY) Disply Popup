 <!--This script for disply popup for regional notice for Non Malaysian Visitor -->
 <script>
  document.addEventListener("DOMContentLoaded", function () {
    // Cookie helpers
    function setCookie(name, value, days) {
      let expires = "";
      if (days) {
        let date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
      }
      document.cookie = name + "=" + (value || "") + expires + "; path=/";
    }

    function getCookie(name) {
      let nameEQ = name + "=";
      let ca = document.cookie.split(";");
      for (let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) === " ") c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    }

    if (!getCookie("geo_acknowledged")) {
      fetch("/browsing_context_suggestions.json")
        .then(response => response.json())
        .then(data => {
          let country = data.detected_values.country.handle;

          if (country !== "MY") {
            // Add responsive styles
            let style = document.createElement("style");
            style.innerHTML = `
              #geo-popup-container {
                position: relative;
                background: white;
                padding: 40px 20px;
                max-width: 400px;
                width: 90%;
                text-align: center;
                border-radius: 12px;
                box-shadow: 0 4px 10px rgba(0,0,0,0.2);
              }
              #geo-popup-container h2 {
                margin-bottom: 10px;
                font-size: 18px;
                font-weight: 600;
              }
              #geo-popup-container p {
                font-size: 14px;
              }
              #geo-popup-container button {
                margin-top: 15px;
                padding: 10px 20px;
                border: none;
                background: #000;
                color: #fff;
                border-radius: 6px;
                font-size: 14px;
                cursor: pointer;
              }
              #geo-x-close {
                position: absolute;
                top: 10px;
                right: 10px;
                background: transparent;
                border: none;
                font-size: 20px;
                cursor: pointer;
              }

              /* Mobile styles */
              @media (max-width: 767px) {
                #geo-popup-container {
                  max-width: 90%;
                  padding: 15px;
                }
                #geo-popup-container h2 {
                  font-size: 16px;
                }
                #geo-popup-container p {
                  font-size: 13px;
                  line-height: 1.4;
                }
                #geo-popup-container button {
                  width: 100%;
                  font-size: 14px;
                  padding: 12px;
                }
              }

              @media (max-width: 480px) {
                #geo-popup-container {
                  max-width: 100%;
                  padding: 20px;
                }
                #geo-popup-container h2 {
                  font-size: 16px;
                }
                #geo-popup-container p {
                  font-size: 14px;
                }
                #geo-popup-container button {
                  font-size: 14px;
                }
                #geo-x-close{
                  text-align: right;
                }
              }
            `;
            document.head.appendChild(style);

            // Create popup
            let popup = document.createElement("div");
            popup.innerHTML = `
              <div id="geo-popup" style="
                position: fixed;
                top: 0; left: 0;
                width: 100%; height: 100%;
                background: rgba(0,0,0,0.6);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                padding: 10px;
              ">
                <div id="geo-popup-container">
                  <button id="geo-x-close" style="
                    margin-top: 0px;
                    background: transparent;
                    color: #000;
                    font-size: 24px;
                    padding-right: 10px;
                    padding-top: 0px;
                    ">&times;</button>
                  <h2>Notice</h2>
                  <p>You are visiting our Malaysia store. If you wish to continue browsing, please acknowledge. We are not selling products outside Malaysia.</p>
                  <button id="geo-close">I Understand</button>
                </div>
              </div>
            `;
            document.body.appendChild(popup);

            function closePopup() {
              document.getElementById("geo-popup").style.display = "none";
              setCookie("geo_acknowledged", "true", 7); // 7-day cookie
            }

            document.getElementById("geo-close").addEventListener("click", closePopup);
            document.getElementById("geo-x-close").addEventListener("click", closePopup);
          }
        });
    }
  });
</script>
