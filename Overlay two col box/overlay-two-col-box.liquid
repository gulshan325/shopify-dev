<section class="col2-sidebyside section section--align-{{section.settings.section_heading_align }} section--spacing-{{section.settings.spacing }} section--outer-spacing-{{section.settings.outer_spacing }} {{ section.settings.custom_classes | escape }} section--pt-{{section.settings.padding_top}} section--pb-{{section.settings.padding_bottom}} section--mt-{{section.settings.margin_top}} section--mb-{{section.settings.margin_bottom}}">
  
  {% if section.settings.content_wrap == "contained" %}
    <div class="container"> 
  {% endif %}
      
  {%- if section.settings.show-title -%}
    {%- if section.settings.section-title != blank -%}
      <h2 class="section__heading">
        {{ section.settings.section-title }}
      </h2>
    {% endif %}
  {%- endif -%}
  {%- for block in section.blocks -%}   
  <div class="hm-left-side-col">
    {%- capture bg_image -%}{%- render 'image-url', shopify:block.settings.bg-img, sh_size:"1600x", cl_tr:"w_1200,c_scale" -%}{%- endcapture -%}
      {%- assign bg_image = bg_image | strip -%}
    <a href="{{ block.settings.link-url }}"><div class="hm-left-box" style="background:url({{bg_image}}) no-repeat center;">
      <div class="overlay-box">.</div>
      <p>{{ block.settings.overlay-subtitle }}</p>
      <h3>{{ block.settings.overlay-title }}</h3>
    </div></a>
    
    <a href="{{ block.settings.link-url }}" style="padding-right: 20px;" {%- if block.settings.target_blank -%} target="_blank" {% endif %}>{{ block.settings.bottom-link-text }}</a>
  </div>
  {% endfor %}
      
  {% if section.settings.content_wrap == "contained" %}
    </div> 
  {% endif %}
  
</section>

{% schema %}
    {
     "name": "Overlay two col box",
     "presets": 
      [
        {
          "name": "Overlay two col box",
          "category": "General"
        }
      ],
    "settings": 
      [
        {
          "type": "header",
          "content": "General Settings"
        },
        {
          "type": "text",
          "id": "section-title",
          "label": "Section Title",
          "info": "Leave blank to disable title"
        },
        {
          "type": "checkbox",
          "id": "show-title",
          "label": "Show title",
          "default": true
        },
        {
          "type": "radio",
          "id": "section_heading_align",
          "label": "Heading Title alignment",
          "options": 
          [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            }
          ],
          "default": "left"
        },
        {
          "type": "range",
          "id": "spacing",
          "label": "Space around section",
          "min": 0,
          "max": 75,
          "step": 5,
          "default": 30
        },
        {
          "type": "range",
          "id": "outer_spacing",
          "label": "Space from neighbours",
          "min": 0,
          "max": 75,
          "step": 5,
          "default": 30
        },
        {
          "type": "range",
          "id": "padding_top",
          "label": "Padding top",
          "min": 0,
          "max": 75,
          "step": 5,
          "default": 0
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "label": "Padding Bottom",
          "min": 0,
          "max": 75,
          "step": 5,
          "default": 0
        },
        {
          "type": "select",
          "id": "content_wrap",
          "label": "Content",
          "options": 
            [
              {
                "value": "contained",
                "label": "Contained"
              },
              {
                "value": "full",
                "label": "Full Width"
              }
            ],
          "default": "contained"
        },
        {
          "type": "range",
          "id": "margin_top",
          "label": "Margin top",
          "min": 0,
          "max": 75,
          "step": 5,
          "default": 0
        },
        {
          "type": "range",
          "id": "margin_bottom",
          "label": "Margin Bottom",
          "min": 0,
          "max": 75,
          "step": 5,
          "default": 0
        }
      ],
    "blocks": 
      [
        {
          "type": "image",
          "name": "Image item",
          "limit": 5,
          "settings": 
            [
              {
                "type": "text",
                "id": "overlay-title",
                "label": "Overlay Title"
              },
              {
                "type": "text",
                "id": "overlay-subtitle",
                "label": "Overlay Subtitle"
              },
              {
                "type": "checkbox",
                "id": "is-overlay",
                "label": "Enable Overlay",
                "default": true
              },
              {
                "type": "image_picker",
                "id": "bg-img",
                "label": "Backgound Image",
                "info": "This image will be croped based on different screen sizes"
              },
              {
                "type": "text",
                "id": "bottom-link-text",
                "label": "Link text"
              },
              {
                "type": "url",
                "id": "link-url",
                "label": "Link URL"
              },
              {
                "type": "checkbox",
                "id": "target_blank",
                "label": "Open in new tab?",
                "default": false
              }
            ]
        }
      ]
    }
{% endschema %}
<style>
  .hm-left-side-col a{
      width: 100%;
    text-align: right;
    padding-right:0px;
}
.hm-left-side-col a:first-of-type::after {
  display: none;
}
</style>